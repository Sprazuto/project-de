<template>
    <div>
        <b-row class="match-height">
            <b-col lg="3" v-for="(card, index) in realisasiBulan" :key="index">
                <card-realisasi-bulan
                    :title="card.title"
                    :subtitle="card.subtitle"
                    :hint-title="card.hintTitle"
                    :hint-description="card.hintDescription"
                    :items="card.items"
                    :progress="card.progress"
                    :color="card.color"
                    :layout="card.layout || 'columns'"
                />
            </b-col>
        </b-row>

        <b-row class="match-height">
            <b-col lg="3" v-for="(card, index) in realisasiTahun" :key="index">
                <card-realisasi-tahun
                    :title="card.title"
                    :subtitle="card.subtitle"
                    :hint-title="card.hintTitle"
                    :hint-description="card.hintDescription"
                    :items="card.items"
                    :progress="card.progress"
                    :color="card.color"
                    :layout="card.layout || 'columns'"
                />
            </b-col>
        </b-row>

        <b-card title="Kick start your project ðŸš€">
            <b-card-text>All the best for your new project.</b-card-text>
            <b-card-text
                >Please make sure to read our
                <b-link
                    href="https://pixinvent.com/demo/vuexy-vuejs-admin-dashboard-template/documentation/guide/development/installation.html"
                    target="_blank"
                >
                    Template Documentation
                </b-link>
                to understand where to go from here and how to use our
                template.</b-card-text
            >
        </b-card>

        <b-card title="Want to integrate with JWT? ðŸ”’">
            <b-card-text
                >We carefully crafted JWT flow so you can implement JWT with
                ease and with minimum efforts.</b-card-text
            >
            <b-card-text
                >Please read our JWT Documentation to get more out of JWT
                authentication.</b-card-text
            >
        </b-card>
        <b-card v-if="articles.length > 0" title="Articles from API">
            <b-list-group>
                <b-list-group-item
                    v-for="article in articles"
                    :key="article.id"
                >
                    <h6>{{ article.title }}</h6>
                    <p>{{ article.content }}</p>
                </b-list-group-item>
            </b-list-group>
        </b-card>
    </div>
</template>

<script>
import {
    BCard,
    BCardText,
    BLink,
    BListGroup,
    BListGroupItem,
    BRow,
    BCol,
} from "bootstrap-vue";
import CardRealisasiBulan from "@/components/CardRealisasiBulan.vue";
import CardRealisasiTahun from "@/components/CardRealisasiTahun.vue";

export default {
    components: {
        BCard,
        BCardText,
        BLink,
        BListGroup,
        BListGroupItem,
        BRow,
        BCol,
        CardRealisasiBulan,
        CardRealisasiTahun,
    },
    data() {
        return {
            articles: [],
        };
    },
    computed: {
        realisasiBulan() {
            return [
                {
                    title: "Persenstase Capaian Realisasi Barjas",
                    subtitle: "Januari - Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        (() => {
                            const completed = 90;
                            const total = 100;
                            const overdue = 5;
                            return {
                                completed,
                                total,
                                overdue,
                                label: "Perencanaan",
                                value: `${completed}<small>${
                                    overdue > 0
                                        ? `<sup><code class="text-danger bg-white p-0">-${overdue}</code></sup>`
                                        : ""
                                }/${total}</small>`,
                                popoverTitle: `${completed} dari ${total} paket selesai.`,
                                popoverContent:
                                    overdue > 0
                                        ? `<span class="text-danger p-0">${overdue} paket terlambat.</span>`
                                        : null,
                            };
                        })(),
                        (() => {
                            const completed = 80;
                            const total = 90;
                            const overdue = 2;
                            return {
                                completed,
                                total,
                                overdue,
                                label: "Pemilihan",
                                value: `${completed}<small>${
                                    overdue > 0
                                        ? `<sup><code class="text-danger bg-white p-0">-${overdue}</code></sup>`
                                        : ""
                                }/${total}</small>`,
                                popoverTitle: `${completed} dari ${total} paket selesai.`,
                                popoverContent:
                                    overdue > 0
                                        ? `<span class="text-danger p-0">${overdue} paket terlambat.</span>`
                                        : null,
                            };
                        })(),
                        (() => {
                            const completed = 65;
                            const total = 80;
                            const overdue = 10;
                            return {
                                completed,
                                total,
                                overdue,
                                label: "Pengadaan",
                                value: `${completed}<small>${
                                    overdue > 0
                                        ? `<sup><code class="text-danger bg-white p-0">-${overdue}</code></sup>`
                                        : ""
                                }/${total}</small>`,
                                popoverTitle: `${completed} dari ${total} paket selesai.`,
                                popoverContent:
                                    overdue > 0
                                        ? `<span class="text-danger p-0">${overdue} paket terlambat.</span>`
                                        : null,
                            };
                        })(),
                        (() => {
                            const completed = 50;
                            const total = 65;
                            const overdue = 0;
                            return {
                                completed,
                                total,
                                overdue,
                                label: "Penyerahan",
                                value: `${completed}<small>${
                                    overdue > 0
                                        ? `<sup><code class="text-danger bg-white p-0">-${overdue}</code></sup>`
                                        : ""
                                }/${total}</small>`,
                                popoverTitle: `${completed} dari ${total} paket selesai.`,
                                popoverContent:
                                    overdue > 0
                                        ? `<span class="text-danger p-0">${overdue} paket terlambat.</span>`
                                        : null,
                            };
                        })(),
                    ],
                    progress: 75,
                    color: "primary",
                },
                {
                    title: "Persenstase Capaian Realisasi Fisik",
                    subtitle: "Januari - Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Realisasi", value: 150 },
                        { label: "Target", value: 850 },
                    ],
                    progress: 20,
                    color: "dark",
                },
                {
                    title: "Persenstase Capaian Realisasi Anggaran",
                    subtitle: "Januari - Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Realisasi", value: "Rp1.339.968.513.795,00" },
                        { label: "Target", value: "Rp1.712.757.690.432,00" },
                    ],
                    progress: 60,
                    color: "secondary",
                    layout: "rows",
                },
                {
                    title: "Persenstase Capaian Realisasi Kinerja",
                    subtitle: "Januari - Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Realisasi", value: 15 },
                        { label: "Target", value: 50 },
                    ],
                    progress: 35,
                    color: "danger",
                },
            ];
        },

        realisasiTahun() {
            return [
                {
                    title: "Progres Tahunan Capaian Barjas",
                    subtitle: "per-Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Target", value: 1500 },
                        { label: "Realisasi", value: 850 },
                    ],
                    progress: 30,
                    color: "primary",
                },
                {
                    title: "Progres Tahunan Capaian Fisik",
                    subtitle: "per-Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Realisasi", value: 150 },
                        { label: "Target", value: 850 },
                    ],
                    progress: 80,
                    color: "dark",
                },
                {
                    title: "Progres Tahunan Capaian Anggaran",
                    subtitle: "per-Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Realisasi", value: "Rp1.339.968.513.795,00" },
                        { label: "Target", value: "Rp1.712.757.690.432,00" },
                    ],
                    progress: 60,
                    color: "secondary",
                    layout: "rows",
                },
                {
                    title: "Progres Tahunan Capaian Kinerja",
                    subtitle: "per-Oktober 2025",
                    hintTitle: "PERSENTASE CAPAIAN REALISASI BARJAS",
                    hintDescription:
                        "Adalah nilai persentase yang menunjukkan jumlah capaian yang sudah tercapai dari sejak awal bulan Januari sampai dengan bulan berjalan.\nRealisasi capaian yang dihitung adalah realisasi paket yang sedang berprogres dan paket yang sudah selesai sampai dengan pembayaran SP2D.\nNilai tersebut didapat dari aplikasi (SIRUP, SIBARASAT, SIPDOK & SIPEKAT) yang data tersebut diolah dan dirumuskan sebagai berikut:\n(Jumlah paket berprogres + Jumlah paket selesai) / Total paket sampai dengan bulan berjalan",
                    items: [
                        { label: "Realisasi", value: 15 },
                        { label: "Target", value: 50 },
                    ],
                    progress: 15,
                    color: "danger",
                },
            ];
        },
    },
    mounted() {
        this.$http
            .get("/articles")
            .then((response) => {
                this.articles =
                    (response.data.results &&
                        response.data.results[0] &&
                        response.data.results[0].data) ||
                    response.data.data ||
                    response.data.articles ||
                    [];
            })
            .catch((error) => {
                console.error("Error fetching articles:", error);
            });
    },
};
</script>

<style></style>
